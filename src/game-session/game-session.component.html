@if(!gameSessionCreated) {

    <mat-accordion>
        @for (entry of adventureMapsList; track entry.key) {
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                    {{ entry.map.adventureMap.name }}
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <!-- Nested saveGames -->
                <mat-nav-list>
                    @for (saveEntry of getSaveGamesList(entry.map); track saveEntry.key) {
                      <mat-list-item
                        [id]="'save-game-' + saveEntry.saveGame.id"
                        [class]="{ 'selected': saveEntry.saveGame.id === saveGameId }"
                        (click)="selectSaveGame(entry.map.adventureMap.adventureId, saveEntry.saveGame.id)"
                        style="cursor: pointer;"
                      >
                        <span>Save ID: {{ saveEntry.saveGame.id }}</span>
                      </mat-list-item>
                    }
                </mat-nav-list>
            </mat-expansion-panel>
        }
    </mat-accordion><br>
    
    <form class="join-game">
        <mat-form-field class="full-width">
            <mat-label>Rejoin Existing Game</mat-label>
            <input matInput type="text" id="rejoin" [formControl]="rejoinCode" placeholder="Rejoin Existing Game" />
        </mat-form-field>
    </form>
    <button mat-flat-button (click)="initializeGame()">Create Game</button> <br>
    <p>Type a code in the above box to rejoin an existing game. Leave it blank to start a new one.</p>
} @else {
    <div>Join game on your device with this code: {{gameCode}}</div>
    <game-state-manager [gameCode]="gameCode"></game-state-manager>
}