<div class="collaborative-text-wrapper" [class.animate-in]="showDisplay">
  <div class="collaborative-text-display">
    <div class="question-container">
      <h1 class="collaborative-question">{{ getPhaseQuestion() }}</h1>
      <p class="collaborative-instruction" [innerHTML]="getPhaseInstruction()"></p>
      
      @if (phaseInfo?.showGameBoard) {
        <div class="game-board-wrapper">
          <app-game-board [gameCode]="gameCode" [gameBoard]="gameBoard"></app-game-board>
        </div>
      } @else if (isMakeChoicePhase() && phaseInfo?.storyToIterateOn && phaseInfo?.storyToIterateOn?.prompt) {
        <app-story [story]="phaseInfo?.storyToIterateOn"></app-story>
      } @else if (isWinningPhase() && winningSubmissions.length > 0 && !isSecretWinningPhase()) {
        <div class="winning-submission">
          @if (isInMultipleWinnersPhase()) {
            <div class="multiple-submissions">
              @for (submission of winningSubmissions; track submission.submissionId) {
                <div class="submission-item">
                  <div class="submission-text">{{ submission.currentText }}</div>
                </div>
              }
            </div>
          } @else {
            <div class="winning-text" [class.typing]="isAnimating">
              {{ currentDisplayText }}<span class="cursor" [class.blinking]="isAnimating">|</span>
            </div>
          }
        </div>
      } @else {
        <div class="no-content">
          <p>No content to display.</p>
        </div>
      }
    </div>
    
    @if (phaseInfo?.collaborativeModeInstructions) {
      <div class="collaborative-mode-container">
        <h2 class="collaborative-mode-title">{{ getCollaborativeModeLabel() }}</h2>
        <p class="collaborative-mode-instruction" [innerHTML]="phaseInfo?.collaborativeModeInstructions"></p>
      </div>
    }
  </div>
</div>